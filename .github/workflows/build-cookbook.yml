name: Build Cookbook
run-name: Building Cookbook to Nextcloud
on: 
  push:
    branches:
      - master
jobs:
  BuildLatex:
    runs-on: ubuntu-latest
    container:
      image: alexbirne/texlive2019:latest
    steps:
      - name: Check out repository code
        uses: actions/checkout@v3
      - name: Build latex
        run: make
      - name: Upload artifact
        uses: actions/upload-artifact@master
        with:
          name: PDF Document
          path: main.pdf
  Upload2Nextcloud:
    needs: BuildLatex
    runs-on: ubuntu-latest
    container:
      image: alexbirne/uploadnextcloud:latest
    steps:
      - name: Download artifact
        uses: actions/download-artifact@master
        with: 
          name: PDF Document
          path: main.pdf
      - name: Understand environment
        run: ls -la
      - name: Understand environment 1
        run: ls -la /
      - name: Understand environment 2
        run: ls -la /home/
      - name: Understand environment 3
        run: ls -la /home/runner/
      - name: Understand environment 4
        run: ls -la /home/runner/work/
      - name: File Upload
        run: ./upload_nextcloud.sh
  
  